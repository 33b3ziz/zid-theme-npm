!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("archiver")):"function"==typeof define&&define.amd?define(["archiver"],t):"object"==typeof exports?exports.cli=t(require("archiver")):e.cli=t(e.archiver)}(global,(function(e){return(()=>{"use strict";var t={526:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default={red:"[1;31m ",green:"[1;32m ",yellow:"[1;33m ",blue:"[1;34m ",purple:"[1;35m ",cyan:"[1;36m "}},86:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=l(526),r=(e="",t="green")=>{let l=a.default[t]+`  ${e}`;console.log(l)},o={log:r,error:e=>{r(),r(`${e}\n`,"red"),process.exit(9)}};t.default=o},98:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=l(747),r=l(86);t.default=e=>{a.unlinkSync(e),r.default.log(`.DS_Store deleted - path: ${e}\n\n`,"yellow")}},951:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=l(86),r=l(242);t.default=()=>{for(let e in r)a.default.log(`â€¢ ${e}`);a.default.log()}},559:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default={structure:{root:["query.json","layout.zid","header.zid","footer.zid","templates","modules","locals","common","assets"],templates:["404.zid","account-addresses.zid","account-orders.zid","account-profile.zid","blog.zid","blogs.zid","categories.zid","category.zid","faqs.zid","cart.zid","home.zid","product.zid","products.zid","search.zid","shipping-and-payments.zid"],common:[".zid",".html"],modules:[".zid",".html"],assets:[".js",".ts",".css",".scss",".map",".png",".jpg",".jpeg",".gif",".svg",".woff",".woff2",".otf",".ttf",".eot"],locals:[".json"]},optinal_folders_files:["modules"],root_required_files:["query.json","layout.zid","header.zid","footer.zid"],need_structure_validation:["templates"],MAX_ASSETS_FILE_SIZE_2MB:2e6}},175:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=l(747),r=l(622),o=l(559),d=l(98),n=l(86),i=(e,t)=>{let l=r.extname(e);return!!t.includes(l)||l},s=(e,t)=>{let l=[];for(let a=0;a<t.length;a++)e.includes(t[a])||o.default.optinal_folders_files.includes(t[a])||l.push(t[a]);return 0===l.length||JSON.stringify(l)},u=(e,t)=>{let l=a.lstatSync(t);l.size>=o.default.MAX_ASSETS_FILE_SIZE_2MB&&n.default.log(`WARNING: ${e} in assets is larger than 2MB: ${c(l.size)}`,"yellow")},c=e=>{let t="";return t=e>=1073741824?(e/1073741824).toFixed(2)+"GB":e>=1048576?(e/1048576).toFixed(2)+"MB":e>=1024?(e/1024).toFixed(2)+"KB":e>1?e+" bytes":1==e?e+" byte":"0 bytes",t};t.default={validate_theme:e=>new Promise(((t,l)=>{let n=a.readdirSync(e),c=s(n,o.default.structure.root);if(!0!==c)return l(`Unable to find:\n   ${c}\n\n   - Make sure theme path is correct or add required files\n`);for(const t of n){let n={filename:t,path:r.resolve(e,t)},c=null;if(".DS_Store"==t?d.default(n.path):c=a.lstatSync(n.path),c&&c.isDirectory()&&o.default.structure.root.includes(t)){let e=a.readdirSync(n.path);if(o.default.need_structure_validation.includes(t)){let a=s(e,o.default.structure[t]);if(!0!==a)return l(`Unable to find in templates folder:\n   ${a}\n\n   - Make sure theme path is correct or add required files\n`)}for(const a of e){let e=r.resolve(n.path,a);if(".DS_Store"!=a){if("assets"==t&&u(a,e),!o.default.need_structure_validation.includes(t)){let e=i(a,o.default.structure[t]);if(!0!==e)return l(`Invalid extension ${e}\n   ${a} in ${t} folder\n`)}}else d.default(e)}}}return t("Theme validated")})),validate_extension:i,validate_structure:s,validate_build_args:e=>{e[1]&&("--name"!==e[1]&&"--path"!==e[1]?n.default.error(`Invalid Argument ${e[1]}`):"--name"==e[1]&&"--path"==e[2]?n.default.error("--name argument cannot be empty"):"--path"==e[1]&&"--name"==e[2]&&n.default.error("--path argument cannot be empty")),e[3]&&"--name"!==e[3]&&"--path"!==e[3]&&n.default.error(`Invalid Argument ${e[3]}`),"--name"!=e[2]&&"--path"!=e[2]||n.default.error(`Invalid Argument ${e[2]} for ${e[1]}`),"--name"!=e[4]&&"--path"!=e[4]||n.default.error(`Invalid Argument ${e[4]} for ${e[3]}`);let t=process.cwd(),l=r.basename(process.cwd());for(let a=1;a<e.length;a++)"--name"==e[a]&&e[a+1]?l=e[a+1]:"--path"==e[a]&&e[a+1]&&(t=r.resolve(process.cwd(),e[a+1]||"."));return e.includes("--path")&&!e.includes("--name")&&(l=r.basename(t)),{build_path:t,build_name:l}}}},591:function(e,t,l){var a=this&&this.__awaiter||function(e,t,l,a){return new(l||(l=Promise))((function(r,o){function d(e){try{i(a.next(e))}catch(e){o(e)}}function n(e){try{i(a.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(d,n)}i((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=l(747),o=l(622),d=l(543),n=l(86),i=l(175),s=l(559),u=d("zip");t.default=(e,t)=>a(void 0,void 0,void 0,(function*(){try{let e=yield i.default.validate_theme(t);n.default.log(),n.default.log(e)}catch(e){n.default.error(e)}const l=r.createWriteStream(o.resolve(t,`${e}.zip`));l.on("close",(function(){n.default.log(u.pointer()+" total bytes"),n.default.log(`${e}.zip successfully created ðŸŽ‰!\n`)})),u.pipe(l),s.default.root_required_files.forEach((e=>{let l=o.resolve(t,e);r.existsSync(l)&&u.append(r.createReadStream(l),{name:e})}));for(let e in s.default.structure){let l=o.resolve(t,e);if("root"!==e&&r.existsSync(l)){let a=r.readdirSync(l);u.append("",{name:`${e}/`}),a.forEach((l=>{let a=o.resolve(t,e,l);u.append(r.createReadStream(a),{name:`${e}/${l}`})}))}}yield u.finalize()}))},785:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=l(86),r=l(591);t.default=(e,t)=>{a.default.log();try{r.default(e,t)}catch(e){a.default.error(e)}}},242:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.help=t.build=t.commands=void 0;const a=l(785);t.build=a.default;const r=l(707);t.help=r.default;const o=l(276);t.version=o.default,t.commands=[{name:"build",command:"build args[ --name optional => default:cwd name, --path optional => default:cwd ]",examples:["example-1: zid-theme build --name omar --path ./folder","example-2: zid-theme build"]},{name:"help",command:"help",examples:["example: zid-theme help"]},{name:"version",command:"[version, --version, --v]",examples:["example: zid-theme --v"]}]},707:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=l(86),r=l(242);t.default=()=>{a.default.log(),a.default.log("help:\n","cyan"),a.default.log("available commands:\n","cyan");for(let e of r.commands)a.default.log(`â€¢  ${e.command}`),e.examples.forEach((e=>a.default.log(`   ${e}`,"yellow"))),a.default.log()}},276:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=l(86),r=l(306);t.default=()=>{a.default.log(`v${r.version}`,"green")}},306:e=>{e.exports=JSON.parse('{"name":"zid-theme","version":"1.0.3","description":"A CLI to process zid theme folder","main":"bin/zid-theme","repository":"https://github.com/zidsa/zid-theme-npm","bin":{"zid-theme":"bin/zid-theme"},"files":["bin/","dist/"],"publishConfig":{"access":"public"},"author":"omar <omar.csse@gmail.com>","license":"MIT","private":false,"scripts":{"test":"echo \\"Error: no test specified\\" && exit 1"},"keywords":["cli","zid","zid-theme"],"dependencies":{"archiver":"^5.2.0"},"devDependencies":{"@types/archiver":"^5.1.0","@types/node":"^14.14.31","ts-loader":"^8.0.17","typescript":"^4.2.2","webpack":"^5.24.2","webpack-cli":"^4.5.0"}}')},543:t=>{t.exports=e},747:e=>{e.exports=require("fs")},622:e=>{e.exports=require("path")}},l={};function a(e){if(l[e])return l[e].exports;var r=l[e]={exports:{}};return t[e].call(r.exports,r,r.exports,a),r.exports}var r={};return(()=>{var e=r;const t=a(242),l=a(86),o=a(175),d=a(951);e.default=e=>{let a=e.slice(2);if(a.length<1&&(l.default.log(),l.default.log("no argument passed\n","red"),l.default.log("available commands:\n"),d.default(),process.exit(9)),["--version","-v","--v","version"].includes(a[0])&&(t.version(),process.exit(0)),t[a[0]]||(l.default.log(),l.default.log(`Invalid argument ${a[0]}\n`,"red"),l.default.log("available commands:\n"),d.default(),process.exit(9)),"build"==a[0]){const e=o.default.validate_build_args(a);t.build(e.build_name,e.build_path)}else"help"==a[0]&&t.help()}})(),r.default})()}));