!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("archiver")):"function"==typeof define&&define.amd?define(["archiver"],t):"object"==typeof exports?exports.cli=t(require("archiver")):e.cli=t(e.archiver)}(global,(function(e){return(()=>{"use strict";var t={526:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default={red:"[1;31m ",green:"[1;32m ",yellow:"[1;33m ",blue:"[1;34m ",purple:"[1;35m ",cyan:"[1;36m "}},86:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=a(526),r=(e="",t="green")=>{let a=l.default[t]+`  ${e}`;console.log(a)},o={log:r,error:e=>{r(),r(`Error: ${e}\n`,"red"),process.exit(9)}};t.default=o},98:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=a(747),r=a(86);t.default=e=>{l.unlinkSync(e),r.default.log(`.DS_Store deleted - path: ${e}\n\n`,"yellow")}},951:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=a(86),r=a(242);t.default=()=>{for(let e of r.commands)l.default.log(`â€¢ ${e.name}`);l.default.log()}},559:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default={structure:{root:["query.json","layout.twig","header.twig","footer.twig","templates","modules","locals","common","assets"],templates:["404.twig","account-addresses.twig","account-orders.twig","account-profile.twig","blog.twig","blogs.twig","categories.twig","category.twig","faqs.twig","cart.twig","home.twig","product.twig","products.twig","search.twig","shipping-and-payments.twig"],common:[".twig"],modules:[".twig"],assets:[".js",".ts",".css",".scss",".map",".png",".jpg",".jpeg",".gif",".svg",".woff",".woff2",".otf",".ttf",".eot"],locals:[".json"]},optinal_folders_files:["modules"],root_required_files:["query.json","layout.twig","header.twig","footer.twig"],need_structure_validation:["templates"],MAX_ASSETS_FILE_SIZE_2MB:2e6,MAX_ZIP_FILE_SIZE_50MB:5e7}},175:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=a(747),r=a(622),o=a(559),n=a(98),i=a(86),d=(e,t)=>{let a=r.extname(e);return!!t.includes(a)||a},s=(e,t)=>{let a=[];for(let l=0;l<t.length;l++)e.includes(t[l])||o.default.optinal_folders_files.includes(t[l])||a.push(t[l]);return 0===a.length||JSON.stringify(a)},u=(e,t)=>{let a=l.lstatSync(t);a.size>=o.default.MAX_ASSETS_FILE_SIZE_2MB&&i.default.log(`WARNING: ${e} in assets is larger than 2MB: ${c(a.size)}`,"yellow")},c=e=>{let t="";return t=e>=1073741824?(e/1e9).toFixed(2)+"GB":e>=1048576?(e/1e6).toFixed(2)+"MB":e>=1024?(e/1e3).toFixed(2)+"KB":e>1?e+" bytes":1==e?e+" byte":"0 bytes",t};t.default={validate_theme:e=>new Promise(((t,a)=>{let i=l.readdirSync(e),c=s(i,o.default.structure.root);if(!0!==c)return a(`Unable to find:\n   ${c}\n\n   - Make sure theme path is correct or add required files\n`);for(const t of i){let i={filename:t,path:r.resolve(e,t)},c=null;if(".DS_Store"==t?n.default(i.path):c=l.lstatSync(i.path),c&&c.isDirectory()&&o.default.structure.root.includes(t)){let e=l.readdirSync(i.path);if(o.default.need_structure_validation.includes(t)){let l=s(e,o.default.structure[t]);if(!0!==l)return a(`Unable to find in templates folder:\n   ${l}\n\n   - Make sure theme path is correct or add required files\n`)}for(const l of e){let e=r.resolve(i.path,l);if(".DS_Store"!=l){if("assets"==t&&u(l,e),!o.default.need_structure_validation.includes(t)){let e=d(l,o.default.structure[t]);if(!0!==e)return a(`Invalid extension ${e}\n   ${l} in ${t} folder\n`)}}else n.default(e)}}}return t("Theme validated")})),validate_extension:d,validate_structure:s,validate_build_args:e=>{e[1]&&("--name"!==e[1]&&"--path"!==e[1]?i.default.error(`Invalid Argument ${e[1]}`):"--name"==e[1]&&"--path"==e[2]?i.default.error("--name argument cannot be empty"):"--path"==e[1]&&"--name"==e[2]&&i.default.error("--path argument cannot be empty")),e[3]&&"--name"!==e[3]&&"--path"!==e[3]&&i.default.error(`Invalid Argument ${e[3]}`),"--name"!=e[2]&&"--path"!=e[2]||i.default.error(`Invalid Argument ${e[2]} for ${e[1]}`),"--name"!=e[4]&&"--path"!=e[4]||i.default.error(`Invalid Argument ${e[4]} for ${e[3]}`);let t=process.cwd(),a=r.basename(process.cwd());for(let l=1;l<e.length;l++)"--name"==e[l]&&e[l+1]?a=e[l+1]:"--path"==e[l]&&e[l+1]&&(t=r.resolve(process.cwd(),e[l+1]||"."));return e.includes("--path")&&!e.includes("--name")&&(a=r.basename(t)),{build_path:t,build_name:a}},formatSizeUnits:c}},591:function(e,t,a){var l=this&&this.__awaiter||function(e,t,a,l){return new(a||(a=Promise))((function(r,o){function n(e){try{d(l.next(e))}catch(e){o(e)}}function i(e){try{d(l.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,i)}d((l=l.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=a(747),o=a(622),n=a(543),i=a(86),d=a(175),s=a(559),u=n("zip");t.default=(e,t)=>l(void 0,void 0,void 0,(function*(){let a=o.resolve(t,`${e}.zip`);try{let e=yield d.default.validate_theme(t);i.default.log(),i.default.log(e)}catch(e){i.default.error(e)}const l=r.createWriteStream(a);l.on("finish",(function(){u.pointer()>=s.default.MAX_ZIP_FILE_SIZE_50MB&&(r.rmSync(a),i.default.log("Total size: "+d.default.formatSizeUnits(u.pointer()),"yellow"),i.default.error(`${e}.zip has to be less than 50MB`)),i.default.log("Total size: "+d.default.formatSizeUnits(u.pointer())),i.default.log(`${e}.zip successfully created ðŸŽ‰!\n`)})),u.pipe(l),s.default.root_required_files.forEach((e=>{let a=o.resolve(t,e);r.existsSync(a)&&u.append(r.createReadStream(a),{name:e})}));for(let e in s.default.structure){let a=o.resolve(t,e);if("root"!==e&&r.existsSync(a)){let l=r.readdirSync(a);u.append("",{name:`${e}/`}),l.forEach((a=>{let l=o.resolve(t,e,a);u.append(r.createReadStream(l),{name:`${e}/${a}`})}))}}yield u.finalize()}))},785:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=a(86),r=a(591);t.default=(e,t)=>{l.default.log();try{r.default(e,t)}catch(e){l.default.error(e)}}},242:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.help=t.build=t.commands=void 0;const l=a(785);t.build=l.default;const r=a(707);t.help=r.default;const o=a(276);t.version=o.default,t.commands=[{name:"build",command:"build args[ --name optional => default:cwd name, --path optional => default:cwd ]",examples:["example-1: zid-theme build --name omar --path ./folder","example-2: zid-theme build"]},{name:"help",command:"help",examples:["example: zid-theme help"]},{name:"version",command:"[version, --version, --v]",examples:["example: zid-theme --v"]}]},707:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=a(86),r=a(242);t.default=()=>{l.default.log(),l.default.log("help:\n","cyan"),l.default.log("available commands:\n","cyan");for(let e of r.commands)l.default.log(`â€¢  ${e.command}`),e.examples.forEach((e=>l.default.log(`   ${e}`,"yellow"))),l.default.log()}},276:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=a(86),r=a(306);t.default=()=>{l.default.log(`v${r.version}`,"green")}},306:e=>{e.exports=JSON.parse('{"name":"zid-theme","version":"1.0.8","description":"A CLI to process zid theme folder","main":"bin/zid-theme","repository":"https://github.com/zidsa/zid-theme-npm","bin":{"zid-theme":"bin/zid-theme"},"files":["bin/","dist/"],"publishConfig":{"access":"public"},"author":"omar <omar.csse@gmail.com>","license":"MIT","private":false,"scripts":{"test":"echo \\"Error: no test specified\\" && exit 1"},"keywords":["cli","zid","zid-theme"],"dependencies":{"archiver":"^5.2.0"},"devDependencies":{"@types/archiver":"^5.1.0","@types/node":"^14.14.31","ts-loader":"^8.0.17","typescript":"^4.2.2","webpack":"^5.24.2","webpack-cli":"^4.5.0"}}')},543:t=>{t.exports=e},747:e=>{e.exports=require("fs")},622:e=>{e.exports=require("path")}},a={};function l(e){if(a[e])return a[e].exports;var r=a[e]={exports:{}};return t[e].call(r.exports,r,r.exports,l),r.exports}var r={};return(()=>{var e=r;const t=l(242),a=l(86),o=l(175),n=l(951);e.default=e=>{let l=e.slice(2);if(l.length<1&&(a.default.log(),a.default.log("no argument passed\n","red"),a.default.log("available commands:\n"),n.default(),process.exit(9)),["--version","-v","--v","version"].includes(l[0])&&(t.version(),process.exit(0)),t[l[0]]||(a.default.log(),a.default.log(`Invalid argument ${l[0]}\n`,"red"),a.default.log("available commands:\n"),n.default(),process.exit(9)),"build"==l[0]){const e=o.default.validate_build_args(l);t.build(e.build_name,e.build_path)}else"help"==l[0]&&t.help()}})(),r.default})()}));